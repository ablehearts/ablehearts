generator client { provider = "prisma-client-js" }
datasource db { provider = "postgresql" url = env("DATABASE_URL") }

model User { id String @id @default(cuid()) email String @unique name String? role Role @default(DONOR) createdAt DateTime @default(now()) }
model Beneficiary { id String @id @default(cuid()) fullName String relation String? bio String? photoUrl String? status String @default("active") campaigns Campaign[] }
model Campaign { id String @id @default(cuid()) title String slug String @unique description String goalAmount Int currency String @default("CAD") startAt DateTime? endAt DateTime? active Boolean @default(true) beneficiary Beneficiary @relation(fields: [beneficiaryId], references: [id]) beneficiaryId String updates Update[] donations Donation[] }
model Update { id String @id @default(cuid()) campaign Campaign @relation(fields: [campaignId], references: [id]) campaignId String title String content String media Json? publishedAt DateTime? }
model Donation { id String @id @default(cuid()) campaign Campaign @relation(fields: [campaignId], references: [id]) campaignId String user User? @relation(fields: [userId], references: [id]) userId String? provider String providerRef String amount Int currency String @default("CAD") fee Int @default(0) net Int @default(0) status String @default("pending") createdAt DateTime @default(now()) }
model AuditLog { id String @id @default(cuid()) actorId String? action String target String? diff Json? createdAt DateTime @default(now()) ip String? }

enum Role { ADMIN DONOR }
